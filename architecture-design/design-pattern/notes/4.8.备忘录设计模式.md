# 备忘录设计模式

备忘录模式，也叫快照（Snapshot）模式，英文翻译是 Memento Design Pattern。在不违背封装原则的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态，以便之后恢复对象为先前的状态。

备忘录模式的定义主要表达了两部分内容。一部分是，存储副本以便后期恢复。这一部分很好理解。另一部分是，要在不违背封装原则的前提下，进行对象的备份和恢复。



快照占用内存大

如果要备份的数据比较大，并且备份的频率比较高，那么快照占用内存会比较大备份和恢复的耗时会比较长。

解决办法：“低频率全量备份”和“高频率增量备份”相结合的方法，全量备份即把所有的数据“拍个快照”保存下来，增量备份即记录每次操作或数据变动。当我们需要恢复到某一时间点的备份的时候，如果这一时间点有做全量备份，我们直接拿来恢复就可以了。如果这一时间点没有对应的全量备份，我们就先找到最近的一次全量备份，然后用它来恢复，之后执行此次全量备份跟这一时间点之间的所有增量备份，也就是对应的操作或者数据变动。这样就能减少全量备份的数量和频率，减少对时间、内存的消耗。