# 剖析冯·诺伊曼体系结构

原文链接：[02 | 大厦基石：无生有，有生万物 (geekbang.org)](https://time.geekbang.org/column/article/91007)

冯·诺依曼体系结构是每个软件的基础架构，由 CPU + 存储器 + 输入输出设备组成。剖析这一基础架构，体会这样的基础架构是怎样应对**解决一切能够用“计算”来解决的问题**这一需求的。

## 需求和规格

当分析架构中的每一个零部件，或者说是在设计架构中的零部件时，需要关心两个问题：

- 第一个问题，是**需求**

  这个零部件用来做什么？它能够被用来做哪些事情？（某种意义上来说更重要的是）它不会被用来做哪些事情？知道零部件的作用也许比较简单，但艰难的是“为什么”——这个零部件为什么被设计成用来干这些事情的，而不是多干一点事，或者少干一点事？

- 第二个问题，是**规格**

  这个零部件对外的接口是怎么样的？它如何与其他零部件联系到一起？

  规格是零部件连接需求的抽象，约束条件会非常多样化，可能是外观（比如形状和颜色），可能是交互方式（比如用键盘、鼠标，或者语音和触摸屏），也可能是质量（比如硬度、耐热性等等）。

## 冯·诺伊曼体系结构的需求和规格

- 需求

  为了解决一切能够用“计算”来解决的问题。

- 规格

  为了实现上述需求，冯·诺伊曼设计了三类零部件：

  - CPU：执行指令序列，指令序列存放在存储器里。
  - 存储器：存放指令和计算涉及的相关数据，作为计算的输入参数和输出结果。
  - 输出输出设备：是计算机开发性的体现，拓展了计算机的能力。

## 需求是怎么被满足的？

**针对一个抽象的需求，我们要明确需求的稳定点和变化点。需求的稳定点往往是系统的核心价值点；而需求的变化点，往往要去做开放性的设计。**

计算机的需求，解决一切可以使用“计算”来解决的问题。

就拿计算机的需求来说，稳定点在与计算机的”计算"能力，需求的变化点，一是用户”计算“需求的多样性，而是用户交互方式的多样性。

计算能力最终体现在计算机的指令集。

计算需求的多样性体现在存放在存储器里的指令序列。

用户交互方式的多样性，则通过定义外部设与中央处理器的数据交换协议实现。



计算能力是计算机的核心能力，也是其最大的价值。什么是计算？计算就是对一个数据（输入）进行变换，产生另一个数据（输出），在数据中就叫做函数，如下：

```
y=f(x)
```

其中 x 和 y 就对应计算机中的输入和输出，都为数据；f 对应计算机的指令序列，由 f(x) 得到 y 的过程就对应与通过指令序列将输入转换为输出的过程。

其中输入和输出这些数据和执行序列都存放在**存储器**中。

**CPU** 从存储器中读取指令和数据进行计算，计算机此时变具备了计算能力。

CPU + 存储器这样的组合已经实现了计算的能力，但有时候我们的输入需要从外部获得，计算的输出也要反馈给外界才有意义。这样就需要**输入和输出设备**，来无限扩展计算机的能力。

有一点需要注意，输入和输出设备和电脑是完全异构的，输入输出设备对电脑来说就只是实现了某项能力的黑盒子。



