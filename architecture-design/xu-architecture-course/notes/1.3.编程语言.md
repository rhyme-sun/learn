# 编程语言

CPU 通过从读取存储器中的数据和指令，计算出结果并输出到存储器，这要依赖计算机就具备了计算能力。并且通过**指令序列**来应对计算需求的多样性。我们可以通过不同的指令序列，满足我们无限的计算需求，这一过程就是编程 。但通过 CPU 的指令集去编程不是一件容易的事情，且编写的代码难以维护，这就需要更加高级，面向程序员编程语言来进行编程。

## 汇编语言

原文链接：[03 | 汇编：编程语言的诞生 (geekbang.org)](https://time.geekbang.org/column/article/91425)

为了解决编程效率的问题，**汇编语言**（和解释它的**编译器**）诞生了。汇编语言的编译器将汇编语言写的程序编译成为 CPU 指令序列，并将其保存到外置的存储设备（比如硬盘）上。

汇编语言非常接近计算机的 CPU 指令，一条汇编指令基本上和 CPU 指令一一对应。

汇编语言的出现没让写程序（编程）成为了一个纯软件的行为，出现了程序员这个分工的标志。程序员可以通过反复修改程序，让后通过编译器将编写的代码翻译成机器语言，并写入到存储设备。

相对于 CPU 指令集，汇编语言主要做了如下的效率优化：

- 使用**文本符号（symbol）**表达机器指令，例如使用 add 表示加法指令，而不用去记忆 CPU 二进制加法指令。
- 使用文本符号表示内存地址，并支持内存地址的自动分配。比如我们在程序中使用了“Hello World!” 这样一段文本，那么汇编编译器将为程序开辟一段**静态存储区**（通常我们叫“**数据段**”）来存放这段文本，并用一个文本符号（也就是**“变量名** -variable”）指向它。用变量名去表达一段内存数据，这样我们就不用去关注内存的物理地址，而把精力放在程序的逻辑表达上。

- 使用文本符号表示要调用的函数（function，也叫做过程 procedure）地址。对 CPU 指令来说，函数只有地址没有名字。但从编程的角度，函数是机器指令的扩展，和机器指令需要用文本符号来助记一样，函数的名称也需要用文本符号来助记。
- 使用文本符号表示程序跳转的地址。高级语言里面，流程控制的语法有很多，比如 goto、if .. else、for、while、until 等等。但是从汇编角度来说，只有两种基本的跳转指令：无条件跳转（jmp）和条件跳转 (je、jne)。同样，跳转的目标地址用文本符号（也就是“标签 -label”）有助于程序逻辑的表达，而不是让人把精力放在具体的指令跳转地址上。

总的来说，汇编从指令能力来说，和机器指令并无而至，它只不过把人们从物理硬件地址中解脱出来，以便人们表达程序逻辑，解放了生产力。

## 编程语言进化

原文链接：[04 | 编程语言的进化 (geekbang.org)](https://time.geekbang.org/column/article/92419)

编程语言的出现对于整个信息科技的发展具有深远的意义。编程语言在信息科技发展中的位置，如同人类文明中语言所在的位置。而编程语言写出的软件（原代码），如人类文明中不断被传承下来的书籍，存储代码的存储设备，如同纸张。

信息科技发展到今天，已经影响到了人们生活的方方面面。不论你从事什么职业，不管你是否会从事软件开发工作，你都无法与信息科技脱节。如果希望你希望更加接近这一切，你就需要了解**和计算机沟通的语言**。

编程范式的进化

- 过程式编程

  过程式是一条一条命名的方式，让计算机按照我们的意愿执行。计算机机器语言的本身就是一条条指令构成，本身已是过程式的，所以过程式的编程最为常见，每个语言都有一定的过程式的影子。

  过程式编程最核心的两个改概念就是结构体（自定义类型）和过程（函数）。数据和函数分离，通过结构体对数据进行组合，通过过程抽象出负载的自定义指令。

- 函数式编程

  函数式编程本质上是对过程式编程的约束，它最核心的主张就是变量不可变，函数尽可能没有副作用。在计算机科学中，函数副作用指当调用函数时，除了返回函数值之外，还对主调用函数产生附加的影响。例如修改全局变量（函数外的变量），修改参数或改变外部存储。

- 面向对象编程

  面向对象编程在过程式的基础上，引入了对象（类）和对象方法，**以对象作为代码的组成单位，对象之间会互相发送消息，协同完成任务**。具有抽象、继承、封装和多态这些特性。

  相比于过程式编程，面向对象编程具有以下特点：

  - 抽象：抽象了使用界面（接口），对于对象有哪些方一目了然，而不像过程式编程，数据结构和过程的关系非常松散。
  - 封装：面向对象不主张使用接口侵入到对象的内部实现细节，而是对外暴露稳定的接口。因为一旦内部实现细节改变了，依赖的对象的相关代码都需要调整。其次，封装特性还起到了保护对象内部数据的作用。
  - 多态：由于对象和对象方法的强关联，我们可以引入接口来抽象不同对象相同的行为。这样**不同对象就可以用相同的代码来实现类似的复杂行为**，这就是多态了。
  - 继承：继承的优点是复用了代码，但继承是一个过度设计，不只让软件工程师在组合与继承中纠结，产生心智负担，也产生了复杂的对象继承树。

- 面向连接语言

  面向连接编程应该算是 Go 自己发明出来的范式，面向连接就是朴素的组合思想。

  面向对象创造性地把**契约**的重要性提高到了非常重要的高度，但这还远远不够。这是因为，并不是只有对象需要契约，语言设计的方方面面都需要契约。比如，同样是使用 Java 语言来编写代码，不同的人编写代码的风格可能是迥异的，就额外需要引入规范来约束编码这一行为，降低代码的阅读成本。

  Go 语言增加了契约的范围，比如从设计上就消除了那些最容易发生口水的地方，让大家专注于意图的表达。

  再比如，消息传递约束了进程（这里的进程是抽象意义上的，在 Go 语言中叫 goroutine）的行为，是进程与进程的连接契约。消息传递是多核背景下流行起来的一种编程思想，其核心主张是：尽可能用消息传递来取代共享内存，从而尽可能避免显式的锁，降低编程负担。

  