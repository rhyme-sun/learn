# 架构思维篇：回顾与总结

原文链接：[67 | 架构思维篇：回顾与总结 (geekbang.org)](https://time.geekbang.org/column/article/181599)

## 基础平台的重要性

信息科技的整体架构，与我们的应用软件架构息息相关。架构分基础架构和应用架构。选择基础架构也是构建业务竞争优势的重要组成部分。

有了基础平台，有了前端与后端，有了过去与未来，我们就有了真真正正的全貌。我们博览群书，为的就是不拘于一隅，串联我们自身的知识体系，形成我们的认知框架。

从技能来说，我们可能把架构师能力去归结为：

- 理需求的能力；
- 读代码的能力；
- 抽象系统的能力。

但架构师的成长之旅，首先是心性修炼之旅。这包括：

- 同理心的修炼，认同他人的能力；
- 全局观的修炼，保持好奇心和学习的韧性；
- 迭代能力的修炼，学会反思，学会在自我否定中不断成长。

## 业务的正交分解

架构就是业务的正交分解。每个模块都有它自己的业务。这里我们说的模块是一种泛指，它包括：函数、类、接口、包、子系统、网络服务程序、桌面程序等等。

架构行为的三步曲：“需求分析”、“概要设计”、模块的 “详细设计”，背后都直指业务的正交分解，只是逐步递进，一步步从模糊到越来越强的确定性，直至最终形成业务设计的完整的、精确无歧义的解决方案。

对业务进行分解得到的每一个模块来说，最重要的是模块边界，我们通常称之为 “接口”。

接口是业务的抽象，同时也是它与使用方的耦合方式。在业务分解的过程中，我们需要反复地审视模块的接口，发现其中 “过度的（或多余的）” 约束条件，把它提高到足够通用的、普适的场景来看。



在架构分解过程中有两大难题。

- 其一，需求的交织，不同需求混杂在一起。这是因为存在我们说的全局性功能。
- 其二，需求的易变。不同客户，不同场景下需求看起来很不一样，场景呈发散趋势。

但无论如何，我们需要坚持作为一名架构师的信仰：任何功能都是可以正交分解的，即使我目前还没有找到方法，那也是因为我还没有透彻理解需求。



怎么做业务分解？

业务分解就是最小化的核心系统，加上多个正交分解的周边系统。核心系统一定要最小化，要稳定。坚持不要往核心系统中增加新功能，这样你的业务架构就不可能有臭味。

所以业务做正交分解的第一件事情，就是要分出哪些是核心系统，哪些是周边子系统。核心系统构成了业务的最小功能集，而后通过不断增加新的周边功能，而演变成功能强大的复杂系统。	

## 开闭原则

总结来说，开闭原则包含以下两层含义：

- 第一，模块的业务要稳定。模块的业务遵循 “只读” 设计，如果需要变化不如把它归档，放弃掉。这种模块业务只读的思想，是很好的架构治理的基础哲学。

  这告诉我们，软件是可以以 “搭积木” 的方式搭出来的。核心的一点是，我们如何形成更多的 “积木”，即一个个业务只读、接口稳定、易于组合的模块。

- 第二，模块的业务变化点，简单一点的，通过回调函数或者接口开放出去，交给其他的业务模块。复杂一点的，通过引入插件机制把系统分解为 “最小化的核心系统 + 多个彼此正交的周边系统”。回调函数或者接口本质上就是一种事件监听机制，所以它是插件机制的特例。

## 领域的理解

应对业务需求的变化，最好的结构就是： 最小化的核心系统 + 多个彼此正交的周边系统。

但是光理解了这一点，并不足以根本性地改变你的架构能力，因为这里面最难的是领域理解。所以需求分析很关键。怎么做需求分析？这一点要讲透真的很难。

整个信息科技的发展，我们把它分为程序驱动和数据驱动两个阶段。

- 程序驱动的本质，是自动化的极致。以前，自动化是非常机械的，要完成自动化需要极大的难度。但是，软件的出现让自动化成为一种普惠价值，这是信息科技的上半部演进史带来的核心收益。

- 但到了数据驱动，事情就变了。我们甚至有了新的专有名词，比如 “智能时代”，或者 “DT 时代”。很多人想到智能，想到的是深度学习，想到的是机器视觉。但其实这非常片面。马云把上半场叫 IT，下半场叫 DT（数据科技），非常形象而且深刻。