# 转义和引号

通过模式扩展我们可以知道，在命令行中我们可以使用一些特殊字符代表特殊含义，这为我们在执行某些命令或查找某些资源时带来了极大的便利性。但有时候我们需要将命令行中的特殊字符原样输入，这是后就要借助到转义符或者引号。

## 转义

某些字符在 Bash 里面有特殊含义（比如 `$`、`&`、`*`），如：

```bash
echo $date
```

上面例子中，输出 `$date` 不会有任何结果，因为 `$` 是一个特殊字符，如果需要输出 `$date` 字符串，需要对 `$` 进行转义，如：

```bash
echo \$date
```

如果想要原样输出这些特殊字符，就必须在它们前面加上**反斜杠**，使其变成普通字符，这就叫做转义（escape）。

反斜杠本身也是特殊字符，如果想要原样输出反斜杠，就需要对它自身转义，连续使用两个反斜线（`\\`），如：

```bash
# 输出反斜杠
echo \\
```

反斜杠除了用于转义，还可以表示一些不可打印的字符：

- `\a`：响铃；
- `\b`：退格；
- `\n`：换行；
- `\r`：回车；
- `\t`：制表符；

如果想要在命令行使用这些不可打印的字符，可以把它们放在引号里面，然后使用 `echo` 命令的 `-e` 参数，如：

```bash
# 输出 atb
echo a\tb

# 输出 a       b
echo "a\tb"
```

## 单引号

Bash 允许字符串放在单引号或双引号之中，加以引用。单引号用于保留字符的字面含义，各种特殊字符在单引号里面，都会变为普通字符。如：

```bash
# 输出 *
echo '*'
# 输出 \
echo '\'
```

## 双引号

双引号比单引号宽松，大部分特殊字符在双引号里面，都会失去特殊含义，变成普通字符。如：

```bash
# 输出 *
echo "*"
```

**但是，三个特殊字符除外：美元符号（`$`）、反引号和反斜杠（`\`），这三个字符在双引号之中，依然有特殊含义，会被 Bash 自动扩展**。如：

```bash
# 输出 SHELL 变量值
echo "$SHELL"

# 输出当前时间
echo "`date`"
```

如果一个文本中包含单引号，则需要将其包裹在双引号中输出：

```bash
# 不正确
echo it's

# 输出 it's
echo "it's"

# 转义双引号
echo "I'd say: \"hello!\""
```

双引号的另一个常见的使用场景是，文件名包含空格。这时就必须使用双引号（或单引号），将文件名放在里面，如：

```bash
# 显示带有空格的文件
ls "two words.txt"
```

## Here 文档

Here 文档（here document）是一种输入多行字符串的方法，格式如下。

```bash
<< token
text
token
```

`<< token` 表示开始标记，token 表示结束标记，token 可以定义成其他任意字符串，如：

```bash
# 输出 HTML 文档
$ cat << _EOF_
<html>
<head>
    <title>
    The title of your page
    </title>
</head>

<body>
    Your page content goes here.
</body>
</html>
_EOF_
```

## Here 字符串

Here 文档还有一个变体，叫做 Here 字符串（Here string），使用三个小于号（`<<<`）表示。它的作用是将字符串通过标准输入，传递给命令。如：

```bash
cat <<< 'hi there'
# 等同于
echo 'hi there' | cat
```

## 总结

有时候我们需要保持特殊字符的原本含义（就表示为一个字符），但因为模式扩展，特殊字符在 Shell 执行时会转换为其他命令执行。这是后我们可以借助转义符号或引号，将特殊字符进行转义。

此外还介绍了 Here 文档和 Here 字符串，其本质上都是标准输入重定向，Here 文档可以通过 `<<<token` 指定文本结束的标志，用来输入多行文本。Here 字符则是通过 `<<` 将字符串通过标准输入传递给命令。

原文链接：[引号和转义 - Bash 脚本教程 - 网道 (wangdoc.com)](https://wangdoc.com/bash/quotation.html)