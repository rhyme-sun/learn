# 二分法

二分法也叫做二分查找法，对于一个长度固定的数组，每次通过**淘汰一半元素**的方法找到最终满足条件的元素，这就叫做二分查找法。

通过二分查找法我们可以在 `O(logN)` 的时间复杂度内找到我们需要的元素。此外二分法不要求数组一定是有序的，只要能够建立起一半淘汰策略即可。



二分法迭代过程如下：

- 二分法每次取 l 和 r 的中间值 mid（`l + ((r - l) >> 1)`），并根据策略淘汰其中一半元素；
- 如果选择淘汰左侧元素，让 l 的位置来到 mid + 1；
- 如果选择淘汰右侧元素，让 r 的位置来到 mid - 1;
- 当  `l<=r` 时进行迭代（即至少有一个元素才进行二分），**迭代结束后，某个条件下的最后一个 mid 往往是我们需要的解**。


## 使用场景

二分法的常用场景。

## 找到有序数组中值等于某个数的位置

```java
static int exist(int[] sortedArr, int num) {
    if (sortedArr == null || sortedArr.length == 0) {
        return -1;
    }
    int l = 0;
    int r = sortedArr.length - 1;
    int index = -1;
    while (l <= r) {
        // mid = (l + r) / 2
        // 使用右移运算而不是除法运算，是因为右移运算更快
        // l + ((r - l) >> 1) 而不是 (l + r) >> 1 是为了避免超过 int 的最大值
        int mid = l + ((r - l) >> 1);
        if (sortedArr[mid] == num) {
            return mid;
        } else if (sortedArr[mid] > num) {
            r = mid - 1;
        } else {
            l = mid + 1;
        }
    }
    return -1;
}
```

## 找到有序数组中小于等于某个数的最大值

```java
static int floor(int[] array, int num) {
    if (array == null || array.length == 0) {
        return -1;
    }
    int l = 0;
    int r = array.length - 1;
    int index = -1;
    // l~r 至少有一个元素
    while (l <= r) {
        int mid = l + ((r - l) >> 1);
        // index 来到最后一个小于等于 num 的 mid 位置
        if (array[mid] <= num) {
            index = mid;
            l = mid + 1;
        } else {
            r = mid - 1;
        }
    }
    return index;
}
```

## 找到有序数组中大于等于某个数的最小值

```java
static int ceiling(int[] array, int num) {
    if (array == null || array.length == 0) {
        return -1;
    }
    int l = 0;
    int r = array.length - 1;
    int index = -1;
    // l~r 至少有一个元素
    while (l <= r) {
        int mid = l + ((r - l) >> 1);
        // index 来到最后一个大于等于 num 的 mid 位置
        if (array[mid] >= num) {
            index = mid;
            r = mid - 1;
        } else {
            l = mid + 1;
        }
    }
    return index;
}
```





