# 构成 C# 语言的基本要素





## 标记

关键字（Keyword）



操作符（Operator）



标识符（Identifier）

不能是关键字，字母和下划线开头，不能以数字开头，如果要用关键字作为标识符，开头要加 @。

命名规范：

类、属性是名词，方法是动词。

大小写：名称空间、类、方法使用帕斯科命名法（驼峰首字母大写），标识符驼峰命名。





标点符号

文本（字面值）

注释与空白：// 和 、/* */

## 类型

var 自动推断类型。

```c#
var x = 3;
x.GetType().Name; // Int32
```



模拟动态类型。

```c#
dynamic x = 100;
x = "hello";
```

### 类型的作用

类型包含的信息：

- 内存空间大小，最大最小值；

  无符号类型：

  - ushort：16 

  - uint：32

  - ulong：64

  浮点类型：

  - float：32，精确到 7 位小数
  - double：64，精确到 15 ~ 16 位小数

- 类型包含的成员（方法、属性、事件等）；

- 此类型的基类；
- 程序运行时，此类型分配在内存的什么位置
  - Stack
  - Heap
  - **Performance Monitor** 查看进程使用量（WIN + R 运行 perfmon）

- 此类型允许的操作（运算）



示例：

```c#
using System.Windows.Forms;

namespace TypeSample
{
    class Program
    {
        static void main(string[] args) 
        {
            Type formType = typeof(Form);
			Console.WriteLine(formType.FullName);
            
            PropertyInfo[] pInfos = formType.GetProperties();
            foreach(var p in pInfos) {
                Console.WriteLine(p.Name);
            }
        }
    }
}
```



```c#
using System.Windows.Forms;

namespace StackOverflow
{
    class Program
    {
        // Build 里设置允许执行 Unsafe 代码。
        static unsafe void main(string[] args) 
        {
       		int* p = stackalloc int[9999999];
            
            // or 
            unsafe
            {
                int* p1 = stackalloc int[9999999];
            }
        }
    }
}
```

> 使用非安全代码
>
> 在项目解决方案[资源管理器](https://so.csdn.net/so/search?q=资源管理器&spm=1001.2101.3001.7020)中的 properties 文件夹上双击，然后选择 Build 选项，勾选“充许不安全代码”一项。



### 类型系统

C# 五大数据类型：

- 类（Classes）：如 Windows、Form、Console、String；
- 结构体（Structures）：如 Int32、Int64、Single、Double；
- 枚举（Enumerations）：如 Visibliity
- 接口（Interfaces）：
- 委托（Delegates）：



C# 类型派生谱系：

```
Object
-- 引用类型
 	-- 类
 	-- 接口
 	-- 委托
-- 值类型
	-- 结构体
	-- 枚举
```

> C# 结构体和类的区别问题：在C#编程语言中，类属于引用类型的数据类型，结构体属于值类型的数据类型，这两种数据类型的本质区别主要是各自指向的内存位置不同。传递类的时候，主要表现为是否同时改变了源对象。
>
> **C# 结构体和类的区别技术要点：**
>
> - 类在传递的时候，传递的内容是位于托管内存中的位置，结构体在传递的时候，传递的内容是位于程序堆栈区的内容。当类的传递对象修改时，将同时修改源对象，而结构体的传递对象修改时，不会对源对象产生影响。
> - 在一个类中，可以定义默认的、不带参数的构造函数，而在结构体中不能定义默认的、不带参数的构造函数。两者都可以定义带有参数的构造函数，通过这些参数给各自的字段赋值或初始化

## 变量

**变量：以变量名所对应的内存地址为起点、以数据类型所要求的存储空间为长度的一块内存区域**。

变量、对象、内存



变量一共有 7 种：静态变量、实例变量、数组元素、值参数（int a）、引用参数（ref int a）、输出形参（out int a）、局部变量



值类型的变量

byte/sbyte/short/ushort

值类型没有实例



引用类型的变量

引用类型的变量存放的值是对象的内存地址。



常量

```c#
const int x = 100;
```



装箱拆箱

```c#
int x = 100;

// 装箱（栈到堆）
object y = x;
// 拆箱（堆到栈）
int z = (int)y;
```

## 方法



