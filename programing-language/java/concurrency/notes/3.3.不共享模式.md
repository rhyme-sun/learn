# 不共享模式

避免共享变量也是解决线程安全问题的一个有效办法，当一个变量时每个线程私有的，自然就不存在线程安全问题，比如局部变量。Java 中除了局部变量外，Java 还提供了线程本地存储（ThreadLocal）支持变量在线程间不共享。

## ThreadLocal

线程本地存储模式本质上是一种避免共享的方案，由于没有共享，所以自然也就没有并发问题。如果你需要在并发场景中使用一个线程不安全的工具类，最简单的方案就是避免共享。避免共享有两种方案，一种方案是将这个工具类作为局部变量使用，另外一种方案就是线程本地存储模式。这两种方案，局部变量方案的缺点是在高并发场景下会频繁创建对象，而线程本地存储方案，每个线程只需要创建一个工具类的实例，所以不存在频繁创建对象的问题。

## 总结

以上内容总结自极客时间《Java并发编程实践》专栏：

- [30 | 线程本地存储模式：没有共享，就没有伤害 (geekbang.org)](https://time.geekbang.org/column/article/93745)