# 线程安全

维基百科是这么定义线程安全的：线程安全指某个函数、函数库在多线程环境下执行时，能够正确处理多个线程**共享的变量**，是的程序功能正确完成。

也就是说我们在使用共享变量时，需要考虑它的线程安全性。

也不是所有情况都需要考虑线程安全，比如共享数据是不可变的，或者能够做到不共享数据（比如 ThreadLocal）就可以保证线程安全。但是现实情况下，我们必须要面对会发生变化的数据。

互斥是用来解决线程安全问题的方法之一，也就是使用锁，让对共享变量的操作串行化。



**锁的性能问题**：

锁会带来一定的性能问题，那么用来解决线程安全问题更好的方案就是使用无锁的算法和数据结构了。

在这方面有很多相关的技术，例如线程本地存储（Thread Local Storage, TLS）、写入时复制（Copy-on-write）、乐观锁等；Java 并发包里面的原子类；Disruptor 无锁的内存队列。

