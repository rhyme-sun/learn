# 字符编码

因为计算机只能处理数字，如果要处理文本，就必须先把文本转换为数字才能处理，于是字符编码就产生了。简单来讲字符编码集就是一组字符和一定范围内的数字的映射关系。

## ASCII 码

ASCII 码就是一种字符编码集合，对照表如下 [ASCII码 (oschina.net)](https://tool.oschina.net/commons?type=4)。

ASCII 码一共规定了 128 个字符的编码，用一个字节（准确来说是 7 位）就够了。但是中文字符超过了 128 个，要使用 ASCII 编码来表示所有中文字符是不够的，所以，中国制定了`GB2312` 编码，在 ASCII 码的基础上把中文编进去。你可以想得到的是，全世界有上百种语言，日本把日文编到 `Shift_JIS` 里，韩国把韩文编到 `Euc-kr` 里，各国有各国的标准，就会不可避免地出现冲突，即就是同一个二进制数字被映射为不同的字符符号，结果就是，在多语言混合的文本中，显示出来会有乱码。

## Unicode 字符集

为了解决这种乱码问题，Unicode 字符集应运而生。Unicode 把所有语言涉及的符号都统一到一套编码里，这样就不会再有乱码问题了。需要注意的是，Unicode 只是一个符号集，它只规定了符号的二进制代码，却没有规定这个二进制代码应该如何存储。

这里就有两个严重的问题：

- 第一个问题是，如何才能区别 Unicode 和 ASCII ？计算机怎么知道三个字节表示一个符号，而不是分别表示三个符号呢？
- 第二个问题是，我们已经知道，英文字母只用一个字节表示就够了，如果 Unicode 统一规定，每个符号用三个或四个字节表示，那么每个英文字母前都必然有二到三个字节是`0`，这对于存储来说是极大的浪费，文本文件的大小会因此大出二三倍，这是无法接受的。

它们造成的结果是：

- 出现了 Unicode 的多种存储方式，也就是说有许多种不同的二进制格式，可以用来表示 Unicode；
- Unicode 在很长一段时间内无法推广，直到互联网的出现。

这也是 Unicode 只能作为字符集而不能作为一种编码格式的原因。

### UTF-8 编码

互联网的普及，强烈要求出现一种统一的编码方式。**UTF-8 就是在互联网上使用最广的一种 Unicode 的实现方式**。其他实现方式还包括 UTF-16（字符用两个字节或四个字节表示）和 UTF-32（字符用四个字节表示），不过在互联网上基本不用。

UTF-8 最大的一个特点，就是它是一种变长的编码方式。它可以使用1~4个字节表示一个符号，根据不同的符号而变化字节长度。

UTF-8 的编码规则很简单，只有二条：

- 对于单字节的符号，字节的第一位设为 0，后面 7 位为这个符号的 Unicode 码。因此对于英语字母，UTF-8 编码和 ASCII 码是相同的。

- 对于 n 字节的符号（`n > 1`），第一个字节的前 n 位都设为 1，第 `n + 1 ` 位设为`0`，后面字节的前两位一律设为 `10` 。剩下的没有提及的二进制位，全部为这个符号的 Unicode 码。

## 总结

### 参考链接

1. [字符串和编码 | 廖雪峰的官方网站 (liaoxuefeng.com)](https://www.liaoxuefeng.com/wiki/1016959663602400/1017075323632896)
2. [字符编码笔记：ASCII，Unicode 和 UTF-8 | 阮一峰的网络日志 (ruanyifeng.com)](https://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html)

