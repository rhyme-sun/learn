# MySQL 事务

## 总览

本片介绍了事务（本地事务）的 4 个特性，以及 MySQL （InnoDB 引擎）怎么实现事务的这 4 个特性的。

## 事务特性

数据库事务是对数据库系统读写操作的更高一层抽象，代表了一个单位的数据库操作。事务将对多个数据对象的多个读写操作视为一个整体，一个操作单位，对外具有 ACID 四个特性。

- Atomicity：原子性，一次事务中的操作要么全部成功，要么全部失败。 

- Consistency：一致性，跨表、跨行、跨事务，数据库始终保持一致状态，数据库总是从一个一致性的状态转换到另外一个一致性的状态。 

- Isolation:：隔离性，又叫可见性，一个事务的写操作不会影响到另一个事务的读操作，包含 4 种隔离级别。 

- Durability：持久性，事务提交成功后，不会丢数据，如电源故障, 系统崩溃。

事务这个概念在数据库系统和用户之间提供了一层抽象，用户仅通过事务这一概念就可以享受 ACID 四个特性，而不需要自己去处理复杂的正确性需求。换句话说，要满足正确性这一需求时十分复杂的，数据库系统封装了这种复杂性，并对外提供事务这一种抽象来使得用户不用独自面都这种复杂性，用户只要选择相信和熟悉并使用这层抽象变可以做到正确性。

## MySQL 实现事务的原子性

// TODO ... Undo Log

## MySQL 实现事务的一致性

// TODO ... Redo Log Undo Log 两阶段提交

## MySQL 实现事务的隔离性

// TODO ... MVCC，锁，隔离级别，脏读、不可重复读、幻读。

## MySQL 实现事务的持久性

// TODO ... Redo Log 和 Binglog 写入机制

## 总结

